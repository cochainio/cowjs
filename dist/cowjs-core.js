!function(t,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var e=n();for(var r in e)("object"==typeof exports?exports:t)[r]=e[r]}}(window,function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([
/*!*********************************************!*\
  !*** ./src/cowjs-core/index.ts + 5 modules ***!
  \*********************************************/
/*! exports provided: Network, Plugin, Service, default */
/*! all exports used */function(t,n,e){"use strict";e.r(n);var r,o=function(){function t(){this.port=0}return t.placeholder=function(){return new t},t.fromJSON=function(n){return Object.assign(t.placeholder(),n)},t.prototype.url=function(){return this.protocol+"://"+this.host+(this.port>0?":"+this.port:"")},t.prototype.clone=function(){return t.fromJSON(JSON.parse(JSON.stringify(this)))},t.prototype.isValid=function(){return this.protocol.length&&this.host.length&&this.port||this.chainID.length},t}(),i=function(){function t(t){void 0===t&&(t=""),this.name=t}return t.placeholder=function(){return new t},t.fromJson=function(n){return Object.assign(t.placeholder(),n)},t}(),u=new(function(){function t(){}return t.prototype.loadPlugin=function(t){this.plugin(t.name)||this.plugins.push(t)},t.prototype.plugin=function(t){return this.plugins.find(function(n){return n.name===t})},t.prototype.supportedBlockchains=function(){return this.plugins.map(function(t){return t.name})},t}()),c=(r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)},function(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),a=function(t){function n(e,r){var o=t.call(this,r)||this;return o.code=e,o.message=r,o.name="CowError",Error.captureStackTrace&&Error.captureStackTrace(o,n),o}return c(n,t),n}(Error),l=function(t,n,e,r){return new(e||(e=Promise))(function(o,i){function u(t){try{a(r.next(t))}catch(t){i(t)}}function c(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(u,c)}a((r=r.apply(t,n||[])).next())})},s=function(t,n){var e,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;u;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=n.call(t,u)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},f=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,i=e.call(t),u=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return u},p=function(){function t(){}return t.callback=function(t,n,e){if(this.callAwaits.has(n)){var r=f(this.callAwaits.get(n),2),o=r[0],i=r[1];this.callAwaits.delete(n);var u=JSON.parse(e);u.code?i(new a(u.code,u.msg)):o(u)}else console.warn("call id "+n+" not found")},t.call=function(n,e,r){return void 0===r&&(r=12e4),l(this,void 0,void 0,function(){var o=this;return s(this,function(i){return window.cochain.callback||(window.cochain.callback=t.callback),[2,new Promise(function(t,i){var u=window.cochain.exec(JSON.stringify({method:n,args:e}));o.callAwaits.has(u)&&i(new a(1,"inconsistent remote exec")),setTimeout(function(){o.callAwaits.has(u)&&(i(new a(1,"timeout")),o.callAwaits.delete(u))},r),o.callAwaits.set(u,[t,i])})]})})},t.callAwaits=new Map,t}();e.d(n,"Network",function(){return o}),e.d(n,"Plugin",function(){return i}),e.d(n,"Service",function(){return p});var h=function(t,n,e,r){return new(e||(e=Promise))(function(o,i){function u(t){try{a(r.next(t))}catch(t){i(t)}}function c(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(u,c)}a((r=r.apply(t,n||[])).next())})},d=function(t,n){var e,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;u;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=n.call(t,u)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},y=function(){function t(){}return t.prototype.loadPlugin=function(t){var n;u.loadPlugin(t),Object.assign(this,((n={})[t.name]=t.signatureProvider(),n[t.name+"Hook"]=t.hookProvider,n))},t.prototype.supportedBlockchains=function(){return u.supportedBlockchains()},t.prototype.getWallets=function(t){return h(this,void 0,void 0,function(){return d(this,function(n){switch(n.label){case 0:return[4,p.call("getWallets",{blockchain:t})];case 1:return[2,n.sent()]}})})},t.prototype.getCurrentWallet=function(){return h(this,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return[4,p.call("getCurrentWallet",{})];case 1:return[2,t.sent()]}})})},t.prototype.shareSNS=function(t,n,e,r){return h(this,void 0,void 0,function(){return d(this,function(o){switch(o.label){case 0:return[4,p.call("shareSNS",{title:t,desc:n,url:e,image:r})];case 1:return[2,o.sent()]}})})},t.prototype.sign=function(t,n,e){return void 0===n&&(n=""),void 0===e&&(e=!1),h(this,void 0,void 0,function(){return d(this,function(r){switch(r.label){case 0:return[4,p.call("sign",{data:t,whatFor:n,isHash:e})];case 1:return[2,r.sent()]}})})},t}();n.default=new y}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly8vLi9zcmMvY293anMtY29yZS9uZXR3b3JrLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3dqcy1jb3JlL3BsdWdpbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY293anMtY29yZS9wbHVnaW4tcmVwb3NpdG9yeS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY293anMtY29yZS9lcnJvci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY293anMtY29yZS9zZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3dqcy1jb3JlL2luZGV4LnRzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsImEiLCJpIiwid2luZG93IiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiTmV0d29yayIsInRoaXMiLCJwb3J0IiwicGxhY2Vob2xkZXIiLCJmcm9tSlNPTiIsImpzb24iLCJhc3NpZ24iLCJ1cmwiLCJwcm90b2NvbCIsImhvc3QiLCJjbG9uZSIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsImlzVmFsaWQiLCJsZW5ndGgiLCJjaGFpbklEIiwiUGx1Z2luIiwiZnJvbUpzb24iLCJwbHVnaW5fcmVwb3NpdG9yeSIsIlBsdWdpblJlcG9zaXRvcnlTaW5nbGV0b24iLCJsb2FkUGx1Z2luIiwicGx1Z2luIiwicGx1Z2lucyIsInB1c2giLCJmaW5kIiwic3VwcG9ydGVkQmxvY2tjaGFpbnMiLCJtYXAiLCJfc3VwZXIiLCJDb3dFcnJvciIsImNvZGUiLCJtZXNzYWdlIiwiX3RoaXMiLCJFcnJvciIsImNhcHR1cmVTdGFja1RyYWNlIiwiX19leHRlbmRzIiwic2VydmljZSIsIlNlcnZpY2UiLCJjYWxsYmFjayIsIm1ldGhvZCIsIm1ldGhvZElEIiwicmVzcG9uc2UiLCJjYWxsQXdhaXRzIiwiaGFzIiwiX2EiLCJfX3JlYWQiLCJyZXNvbHZlIiwicmVqZWN0IiwiZGVsZXRlIiwicmVwIiwiZXJyb3IiLCJtc2ciLCJjb25zb2xlIiwid2FybiIsImFyZ3MiLCJ0aW1lb3V0IiwiY29jaGFpbiIsIlByb21pc2UiLCJleGVjIiwic2V0VGltZW91dCIsInNldCIsIk1hcCIsImNvd2pzX2NvcmVfQ293IiwiQ293Iiwic2lnbmF0dXJlUHJvdmlkZXIiLCJob29rUHJvdmlkZXIiLCJnZXRXYWxsZXRzIiwiYmxvY2tjaGFpbiIsInNlbnQiLCJnZXRDdXJyZW50V2FsbGV0Iiwic2hhcmVTTlMiLCJ0aXRsZSIsImRlc2MiLCJpbWFnZSIsInNpZ24iLCJkYXRhIiwid2hhdEZvciIsImlzSGFzaCIsIl9fd2VicGFja19leHBvcnRzX18iXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEdBQ0Esb0JBQUFDLFNBQUEsaUJBQUFDLE9BQ0FBLE9BQUFELFFBQUFELFNBQ0Esc0JBQUFHLGVBQUFDLElBQ0FELE9BQUEsR0FBQUgsT0FDQSxDQUNBLElBQUFLLEVBQUFMLElBQ0EsUUFBQU0sS0FBQUQsR0FBQSxpQkFBQUosZ0JBQUFGLEdBQUFPLEdBQUFELEVBQUFDLElBUEEsQ0FTQ0MsT0FBQSxXQUNELG1CQ1RBLElBQUFDLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FB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QyxTQUFNekMsRUFBUWpFLEtBQUssT0FBUSxDQUM5QndHLEtBQUlBLEVBQ0pDLFFBQU9BLEVBQ1BDLE9BQU1BLFlBSFYsU0FBT2pDLEVBQUF3QixjQWNmTCxFQS9DQSxHQWlEZWUsRUFBQSxZQUFJaEIiLCJmaWxlIjoiY293anMtY29yZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSB7XG5cdFx0dmFyIGEgPSBmYWN0b3J5KCk7XG5cdFx0Zm9yKHZhciBpIGluIGEpICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgPyBleHBvcnRzIDogcm9vdClbaV0gPSBhW2ldO1xuXHR9XG59KSh3aW5kb3csIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIE5ldHdvcmsge1xyXG4gICAgc3RhdGljIHBsYWNlaG9sZGVyICgpIHsgcmV0dXJuIG5ldyBOZXR3b3JrKCkgfVxyXG5cclxuICAgIHN0YXRpYyBmcm9tSlNPTiAoanNvbjogb2JqZWN0KSB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oTmV0d29yay5wbGFjZWhvbGRlcigpLCBqc29uKVxyXG4gICAgfVxyXG5cclxuICAgIG5hbWU6IHN0cmluZ1xyXG4gICAgcHJvdG9jb2w6IHN0cmluZ1xyXG4gICAgaG9zdDogc3RyaW5nXHJcbiAgICBwb3J0OiBudW1iZXIgPSAwXHJcbiAgICBibG9ja2NoYWluOiBzdHJpbmdcclxuICAgIGNoYWluSUQ6IHN0cmluZ1xyXG5cclxuICAgIHVybCAoKSB7XHJcbiAgICAgICAgcmV0dXJuIGAke3RoaXMucHJvdG9jb2x9Oi8vJHt0aGlzLmhvc3R9YCArICh0aGlzLnBvcnQgPiAwID8gYDoke3RoaXMucG9ydH1gIDogJycpXHJcbiAgICB9XHJcblxyXG4gICAgY2xvbmUgKCkge1xyXG4gICAgICAgIHJldHVybiBOZXR3b3JrLmZyb21KU09OKEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcykpKVxyXG4gICAgfVxyXG5cclxuICAgIGlzVmFsaWQgKCkge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5wcm90b2NvbC5sZW5ndGggJiYgdGhpcy5ob3N0Lmxlbmd0aCAmJiB0aGlzLnBvcnQpIHx8IHRoaXMuY2hhaW5JRC5sZW5ndGhcclxuICAgIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQbHVnaW4ge1xyXG4gICAgc3RhdGljIHBsYWNlaG9sZGVyICgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFBsdWdpbigpXHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGZyb21Kc29uIChqc29uOiBvYmplY3QpIHtcclxuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihQbHVnaW4ucGxhY2Vob2xkZXIoKSwganNvbilcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvciAocHVibGljIG5hbWUgPSAnJykge31cclxufVxyXG4iLCJpbXBvcnQgUGx1Z2luIGZyb20gJy4vcGx1Z2luJ1xyXG5cclxuZXhwb3J0IGNsYXNzIFBsdWdpblJlcG9zaXRvcnlTaW5nbGV0b24ge1xyXG4gICAgcGx1Z2luczogUGx1Z2luW11cclxuXHJcbiAgICBsb2FkUGx1Z2luIChwbHVnaW46IFBsdWdpbikge1xyXG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4ocGx1Z2luLm5hbWUpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGx1Z2lucy5wdXNoKHBsdWdpbilcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcGx1Z2luIChuYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wbHVnaW5zLmZpbmQocGx1Z2luID0+IHBsdWdpbi5uYW1lID09PSBuYW1lKVxyXG4gICAgfVxyXG5cclxuICAgIHN1cHBvcnRlZEJsb2NrY2hhaW5zICgpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGx1Z2lucy5tYXAocGx1Z2luID0+IHBsdWdpbi5uYW1lKVxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBQbHVnaW5SZXBvc2l0b3J5ID0gbmV3IFBsdWdpblJlcG9zaXRvcnlTaW5nbGV0b24oKVxyXG5leHBvcnQgZGVmYXVsdCBQbHVnaW5SZXBvc2l0b3J5XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENvd0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gICAgbmFtZSA9ICdDb3dFcnJvcidcclxuXHJcbiAgICBjb25zdHJ1Y3RvciAocHVibGljIGNvZGU6IG51bWJlciwgcHVibGljIG1lc3NhZ2U6IHN0cmluZykge1xyXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpXHJcblxyXG4gICAgICAgIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xyXG4gICAgICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBDb3dFcnJvcilcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IENvd0Vycm9yIGZyb20gJy4vZXJyb3InXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZXJ2aWNlIHtcclxuICAgIHN0YXRpYyBjYWxsYmFjayAobWV0aG9kOiBzdHJpbmcsIG1ldGhvZElEOiBudW1iZXIsIHJlc3BvbnNlOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAoIXRoaXMuY2FsbEF3YWl0cy5oYXMobWV0aG9kSUQpKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgY2FsbCBpZCAke21ldGhvZElEfSBub3QgZm91bmRgKVxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgWyByZXNvbHZlLCByZWplY3QgXSA9IHRoaXMuY2FsbEF3YWl0cy5nZXQobWV0aG9kSUQpXHJcbiAgICAgICAgdGhpcy5jYWxsQXdhaXRzLmRlbGV0ZShtZXRob2RJRClcclxuXHJcbiAgICAgICAgY29uc3QgcmVwID0gSlNPTi5wYXJzZShyZXNwb25zZSlcclxuICAgICAgICBpZiAocmVwLmNvZGUpIHsgLy8gZmFpbGVkXHJcbiAgICAgICAgICAgIHJlamVjdChuZXcgQ293RXJyb3IocmVwLmNvZGUsIHJlcC5tc2cpKVxyXG4gICAgICAgIH0gZWxzZSB7IC8vIHN1Y2NlZWRlZFxyXG4gICAgICAgICAgICByZXNvbHZlKHJlcClcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGFzeW5jIGNhbGwgKG1ldGhvZDogc3RyaW5nLCBhcmdzOiBvYmplY3QsIHRpbWVvdXQ6IG51bWJlciA9IDEyMDAwMCkgeyAvLyBkZWZhdWx0IHRpbWVvdXQgaXMgMTIwc1xyXG4gICAgICAgIC8vIExhemlseSBzZXQgY2FsbGJhY2tcclxuICAgICAgICBpZiAoISh3aW5kb3cgYXMgYW55KS5jb2NoYWluLmNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICh3aW5kb3cgYXMgYW55KS5jb2NoYWluLmNhbGxiYWNrID0gU2VydmljZS5jYWxsYmFja1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbWV0aG9kSUQgPSAod2luZG93IGFzIGFueSkuY29jaGFpbi5leGVjKEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZCxcclxuICAgICAgICAgICAgICAgIGFyZ3NcclxuICAgICAgICAgICAgfSkpXHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5jYWxsQXdhaXRzLmhhcyhtZXRob2RJRCkpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgQ293RXJyb3IoMSwgJ2luY29uc2lzdGVudCByZW1vdGUgZXhlYycpKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhbGxBd2FpdHMuaGFzKG1ldGhvZElEKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgQ293RXJyb3IoMSwgJ3RpbWVvdXQnKSlcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGxBd2FpdHMuZGVsZXRlKG1ldGhvZElEKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCB0aW1lb3V0KVxyXG5cclxuICAgICAgICAgICAgdGhpcy5jYWxsQXdhaXRzLnNldChtZXRob2RJRCwgW3Jlc29sdmUsIHJlamVjdF0pXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBjYWxsQXdhaXRzID0gbmV3IE1hcDxudW1iZXIsIFthbnksIGFueV0+KClcclxufVxyXG4iLCJpbXBvcnQgTmV0d29yayBmcm9tICcuL25ldHdvcmsnXHJcbmltcG9ydCBQbHVnaW4gZnJvbSAnLi9wbHVnaW4nXHJcbmltcG9ydCBQbHVnaW5SZXBvc2l0b3J5IGZyb20gJy4vcGx1Z2luLXJlcG9zaXRvcnknXHJcbmltcG9ydCBTZXJ2aWNlIGZyb20gJy4vc2VydmljZSdcclxuXHJcbmV4cG9ydCB7IE5ldHdvcmssIFBsdWdpbiwgU2VydmljZSB9XHJcblxyXG5jbGFzcyBDb3cge1xyXG4gICAgbG9hZFBsdWdpbiAocGx1Z2luOiBQbHVnaW4pIHtcclxuICAgICAgICBQbHVnaW5SZXBvc2l0b3J5LmxvYWRQbHVnaW4ocGx1Z2luKVxyXG5cclxuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIHtcclxuICAgICAgICAgICAgW3BsdWdpbi5uYW1lXTogKHBsdWdpbiBhcyBhbnkpLnNpZ25hdHVyZVByb3ZpZGVyKCksXHJcbiAgICAgICAgICAgIFtwbHVnaW4ubmFtZSArICdIb29rJ106IChwbHVnaW4gYXMgYW55KS5ob29rUHJvdmlkZXJcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHN1cHBvcnRlZEJsb2NrY2hhaW5zICgpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgcmV0dXJuIFBsdWdpblJlcG9zaXRvcnkuc3VwcG9ydGVkQmxvY2tjaGFpbnMoKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEdldCBhbGwgd2FsbGV0cyBvZiBzcGVjaWZpZWQgYmxvY2tjaGFpbiB0eXBlIG9yIGFsbCBibG9ja2NoYWluIHR5cGVzXHJcbiAgICBhc3luYyBnZXRXYWxsZXRzIChibG9ja2NoYWluPzogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IFNlcnZpY2UuY2FsbCgnZ2V0V2FsbGV0cycsIHtcclxuICAgICAgICAgICAgYmxvY2tjaGFpblxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0Q3VycmVudFdhbGxldCAoKSB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IFNlcnZpY2UuY2FsbCgnZ2V0Q3VycmVudFdhbGxldCcsIHt9KVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNoYXJlU05TICh0aXRsZTogc3RyaW5nLCBkZXNjOiBzdHJpbmcsIHVybDogc3RyaW5nLCBpbWFnZTogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IFNlcnZpY2UuY2FsbCgnc2hhcmVTTlMnLCB7XHJcbiAgICAgICAgICAgIHRpdGxlLCBkZXNjLCB1cmwsIGltYWdlXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICAvLyBTaWduIGFyYml0cmFyeSBkYXRhIHVzaW5nIHByaXZhdGUga2V5IG9mIGN1cnJlbnQgd2FsbGV0XHJcbiAgICBhc3luYyBzaWduIChkYXRhOiBzdHJpbmcsIHdoYXRGb3I6IHN0cmluZyA9ICcnLCBpc0hhc2g6IGJvb2xlYW4gPSBmYWxzZSkge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCBTZXJ2aWNlLmNhbGwoJ3NpZ24nLCB7XHJcbiAgICAgICAgICAgIGRhdGEsXHJcbiAgICAgICAgICAgIHdoYXRGb3IsXHJcbiAgICAgICAgICAgIGlzSGFzaFxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgLypcclxuICAgIGFzeW5jIGdldFB1YmxpY0tleSAoYmxvY2tjaGFpbjogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IFNlcnZpY2UuY2FsbCgnZ2V0UHVibGljS2V5Jywge1xyXG4gICAgICAgICAgICBibG9ja2NoYWluXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgICovXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IG5ldyBDb3coKVxyXG4iXSwic291cmNlUm9vdCI6IiJ9